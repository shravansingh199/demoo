console.log('This site was generated by Hugo.');

document.addEventListener("DOMContentLoaded", () => {
  const list = document.querySelector(".pagination ul");
  if (!list) return;

  const lis = Array.from(list.querySelectorAll("li"));
  const activeIndex = lis.findIndex(li => li.classList.contains("active"));
  const windowSize = 2; // pages before + after

  const dot = () => {
    const li = document.createElement("li");
    li.textContent = "…";
    li.style.pointerEvents = "none";
    return li;
  };

  const minShow = activeIndex - windowSize;
  const maxShow = activeIndex + windowSize;

  const newList = [];

  lis.forEach((li, i) => {
    const text = li.textContent.trim();

    const isFirst = text === "««";
    const isPrev  = text === "«";
    const isNext  = text === "»";
    const isLast  = text === "»»";
    const isActive = li.classList.contains("active");
    const isNumber = !isNaN(parseInt(text, 10));

    let show = false;

    if (isFirst && activeIndex > 3) show = true;
    if (isPrev  && activeIndex > 1) show = true;
    if (isNext  && activeIndex < lis.length - 2) show = true;
    if (isLast  && activeIndex < lis.length - 4) show = true;

    if (isNumber && (i >= minShow && i <= maxShow)) show = true;
    if (isActive) show = true;

    if (show) newList.push(li.cloneNode(true));
  });

  if (activeIndex - windowSize > 3) newList.splice(2, 0, dot());
  const lastNumberIndex = lis.length - 3;
  if (activeIndex + windowSize < lastNumberIndex - 2)
    newList.splice(newList.length - 2, 0, dot());

  list.innerHTML = "";
  newList.forEach(li => list.appendChild(li));
});

